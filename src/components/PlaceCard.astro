---
import type { Place } from '@prisma/client';
import Star from './Star.astro';

type Props = {
  place: Place;
};

const { place } = Astro.props;
const rating = Math.round(place.avg_rating.toNumber());
---

<div class='bg-white shadow-md rounded-lg max-w-sm dark:bg-gray-800 dark:border-gray-700'>
  <a href={`/place/${place.id}`}>
    <img class='rounded-t-lg p-8' src={`/assets/images/${place.image}`} alt='product image' />
  </a>
  <div class='px-5 pb-5'>
    <a href={`/place/${place.id}`}>
      <h3 class='text-gray-900 font-semibold text-xl tracking-tight dark:text-white'>{place.title}</h3>
    </a>
    <div class='flex items-center justify-between mt-2.5 mb-5'>
      <div class='flex items-center'>
        {Array.from({ length: rating }, (_, i) => <Star key={i} />)}
      </div>

      <span class='bg-blue-100 text-blue-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded dark:bg-blue-200 dark:text-blue-800 ml-3'
        >{place.avg_rating}</span
      >
    </div>
  </div>
</div>
